<!DOCTYPE html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
</head>
<div class="text-center">
    <h1 class="display-4">Covid Data</h1>
    <p>Pick a state below</p>

    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>




    <div class="dropdown-space dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span id="selected">Choose State</span><span class="caret"></span>
        </button>
        <div class="dropdown-menu pre-scrollable" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="#">Choose State</a>
            <a class="dropdown-item" href="#">Alabama</a>
            <a class="dropdown-item" href="#">Alaska</a>
            <a class="dropdown-item" href="#">Arizona</a>
            <a class="dropdown-item" href="#">Arkansas</a>
            <a class="dropdown-item" href="#">California</a>
            <a class="dropdown-item" href="#">Colorado</a>
            <a class="dropdown-item" href="#">Connecticut</a>
            <a class="dropdown-item" href="#">Delaware</a>
            <a class="dropdown-item" href="#">Florida</a>
            <a class="dropdown-item" href="#">Georgia</a>
            <a class="dropdown-item" href="#">Hawaii</a>
            <a class="dropdown-item" href="#">Idaho</a>
            <a class="dropdown-item" href="#">Illinois</a>
            <a class="dropdown-item" href="#">Indiana</a>
            <a class="dropdown-item" href="#">Iowa</a>
            <a class="dropdown-item" href="#">Kansas</a>
            <a class="dropdown-item" href="#">Kentucky</a>
            <a class="dropdown-item" href="#">Louisiana</a>
            <a class="dropdown-item" href="#">Maine</a>
            <a class="dropdown-item" href="#">Maryland</a>
            <a class="dropdown-item" href="#">Massachusetts</a>
            <a class="dropdown-item" href="#">Michigan</a>
            <a class="dropdown-item" href="#">Minnesota</a>
            <a class="dropdown-item" href="#">Mississippi</a>
            <a class="dropdown-item" href="#">Missouri</a>
            <a class="dropdown-item" href="#">Montana</a>
            <a class="dropdown-item" href="#">Nebraska</a>
            <a class="dropdown-item" href="#">Nevada</a>
            <a class="dropdown-item" href="#">New Hampshire</a>
            <a class="dropdown-item" href="#">New Jersey</a>
            <a class="dropdown-item" href="#">New Mexico</a>
            <a class="dropdown-item" href="#">New York</a>
            <a class="dropdown-item" href="#">North Carolina</a>
            <a class="dropdown-item" href="#">North Dakota</a>
            <a class="dropdown-item" href="#">Ohio</a>
            <a class="dropdown-item" href="#">Oklahoma</a>
            <a class="dropdown-item" href="#">Oregon</a>
            <a class="dropdown-item" href="#">Pennsylvania</a>
            <a class="dropdown-item" href="#">Rhode Island</a>
            <a class="dropdown-item" href="#">South Carolina</a>
            <a class="dropdown-item" href="#">South Dakota</a>
            <a class="dropdown-item" href="#">Tennessee</a>
            <a class="dropdown-item" href="#">Texas</a>
            <a class="dropdown-item" href="#">Utah</a>
            <a class="dropdown-item" href="#">Vermont</a>
            <a class="dropdown-item" href="#">Virginia</a>
            <a class="dropdown-item" href="#">Washington</a>
            <a class="dropdown-item" href="#">West Virginia</a>
            <a class="dropdown-item" href="#">Wisconsin</a>
            <a class="dropdown-item" href="#">Wyoming</a>
        </div>
    </div>
    <div class="hide" id="coviddata" hidden>
        <span id="stateName">State Data</span><span class="caret"></span>
        <table id="table_body"></table>
    </div>
    <div class="row">
        <div class="col-2 box">
            Covid facts
        </div>
        <div class="col-3">
          <canvas id="myChart" width="400" height="400"></canvas>
<script>
new Chart(document.getElementById("myChart"), {
            type: 'line',
            data: {
                labels: [1500, 1600, 1700, 1750, 1800, 1850, 1900, 1950, 1999, 2050],
                datasets: [{
                    data: [86, 114, 106, 106, 107, 111, 133, 221, 783, 2478],
                    label: "Africa",
                    borderColor: "#3e95cd",
                    fill: false
                }, {
                    data: [282, 350, 411, 502, 635, 809, 947, 1402, 3700, 5267],
                    label: "Asia",
                    borderColor: "#8e5ea2",
                    fill: false
                }, {
                    data: [168, 170, 178, 190, 203, 276, 408, 547, 675, 734],
                    label: "Europe",
                    borderColor: "#3cba9f",
                    fill: false
                }, {
                    data: [40, 20, 10, 16, 24, 38, 74, 167, 508, 784],
                    label: "Latin America",
                    borderColor: "#e8c3b9",
                    fill: false
                }, {
                    data: [6, 3, 2, 2, 7, 26, 82, 172, 312, 433],
                    label: "North America",
                    borderColor: "#c45850",
                    fill: false
                }
                ]
            },
            options: {
                title: {
                    display: true,
                    text: 'World population per region (in millions)'
                }
            }
        });
</script>
        </div>
        <div class="col-2 box">
            Covid facts
        </div>
        <div class="col-3">

        </div>
        <div class="col-2 box">
            Covid facts
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <!-- <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-analytics.js"></script> -->
    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyALk44aihOM5EqeiQwfD_vhIF7YhXIVwMY",
            authDomain: "swamphackscovid19data.firebaseapp.com",
            databaseURL: "https://swamphackscovid19data-default-rtdb.firebaseio.com",
            projectId: "swamphackscovid19data",
            storageBucket: "swamphackscovid19data.appspot.com",
            messagingSenderId: "573451783241",
            appId: "1:573451783241:web:96c03f6350266800a98398",
            measurementId: "G-G0JKHK3W3V"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>
</div>
<script>
    $('.dropdown-menu a').click(function () {
        $('#selected').text($(this).text());
        if ($(this).text() == "Choose State" && document.getElementById('coviddata').getAttribute("hidden") == null) {
            document.getElementById('coviddata').setAttribute("hidden", true);

        }
        else if ($(this).text() != "Choose State") {
            //Display Code below
            var state = "FL"; //this should be interchangeable due to drop down
            var city = "Jacksonville";
            var zip = "32223";
            var database = firebase.database();
            var hospData = database.ref("hospital_data");
            var stateData = database.ref("state_data");
            //open snapshot
            stateData.orderByChild("state").equalTo(state).once('value', function (snapshot) {
                var data = snapshot.val();
                for (let i in data) {
                    var dat = data[i].state;
                    console.log(data[i].date);
                    $("#table_body").append("<tr><td>" + dat + "</td></tr>"); //I added it to a table, but dat currently contains the state val and
                    // data currently contains the whole chunk from date to deaths etc
                }
            });


        }

    });

</script>

<style>
    .dropdown-menu {
        max-height: 200px;
        overflow-y: auto;
    }

    .dropdown-space {
        margin-bottom: 6cm;
    }

    .box {
        width: auto;
        padding: 10px;
        border: 5px solid gray;
        margin: 0;
    }
</style>
